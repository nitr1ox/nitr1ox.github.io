<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OM ‚Äî Une Passion (Carrousel 3D)</title>
  <style>
    :root{
      --bg:#050914; --bg2:#070b1a;
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.70);
      --card:rgba(255,255,255,.06);
      --stroke:rgba(255,255,255,.14);
      --blue:#00b3ff; --cyan:#2ee6ff; --gold:#ffcc66;
      --shadow:0 18px 60px rgba(0,0,0,.55);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(0,179,255,.22), transparent 60%),
        radial-gradient(900px 600px at 80% 30%, rgba(255,204,102,.12), transparent 60%),
        radial-gradient(1000px 700px at 70% 90%, rgba(46,230,255,.12), transparent 55%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      overflow-x:hidden;
    }
    .lights{
      position:fixed; inset:0; pointer-events:none; z-index:-1;
      filter:blur(40px) saturate(120%); opacity:.65;
    }
    .lights::before,.lights::after{
      content:""; position:absolute; inset:-40px;
      background:conic-gradient(from 210deg at 50% 50%,
        rgba(0,179,255,0), rgba(0,179,255,.28),
        rgba(255,204,102,.18), rgba(46,230,255,.22),
        rgba(0,179,255,0));
      animation:spin 16s linear infinite;
    }
    .lights::after{animation-duration:26s;opacity:.55;mix-blend-mode:screen}
    @keyframes spin{to{transform:rotate(360deg)}}

    header{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(14px);
      background: rgba(5,9,20,.55);
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .wrap{width:min(1100px,92vw); margin:0 auto}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0;gap:12px}
    .brand{display:flex;align-items:center;gap:12px;text-decoration:none;color:var(--text);user-select:none}
    .logo{
      width:42px;height:42px;border-radius:14px;
      background:linear-gradient(135deg, rgba(0,179,255,.95), rgba(46,230,255,.55));
      box-shadow:0 10px 24px rgba(0,179,255,.22);
      position:relative;
    }
    .logo::after{
      content:""; position:absolute; inset:2px; border-radius:12px;
      background:linear-gradient(180deg, rgba(255,255,255,.20), rgba(255,255,255,0));
      border:1px solid rgba(255,255,255,.18);
    }
    .brand strong{letter-spacing:.4px}
    .brand small{display:block;color:var(--muted);font-weight:500;margin-top:2px}

    .links{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
    .links a{
      color:var(--muted);text-decoration:none;font-weight:700;
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(255,255,255,.08);
      background:rgba(255,255,255,.03);
      transition:transform .18s ease, background .18s ease, border-color .18s ease;
    }
    .links a:hover{
      transform:translateY(-2px);
      background:rgba(255,255,255,.06);
      border-color:rgba(255,255,255,.14);
      color:var(--text);
    }

    .hero{
      padding:56px 0 18px;
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:26px;
      align-items:center;
    }
    @media (max-width: 900px){ .hero{grid-template-columns:1fr; padding-top:44px} }

    .kicker{
      display:inline-flex;align-items:center;gap:10px;
      padding:10px 12px;border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.05);
      color:var(--muted);font-weight:800;letter-spacing:.3px;
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background:radial-gradient(circle at 30% 30%, #fff, var(--cyan));
      box-shadow:0 0 18px rgba(46,230,255,.45);
    }
    h1{
      font-size:clamp(34px,4vw,56px);
      line-height:1.02;
      margin:16px 0 10px;
      letter-spacing:-.5px;
    }
    .lead{color:var(--muted);font-size:clamp(16px,1.35vw,18px);line-height:1.6;margin:0 0 14px}

    .ctaRow{display:flex;gap:12px;flex-wrap:wrap;margin-top:16px}
    .btn{
      display:inline-flex;align-items:center;gap:10px;
      padding:12px 14px;border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      color:var(--text);text-decoration:none;font-weight:900;
      box-shadow:0 12px 34px rgba(0,0,0,.25);
      transition:transform .18s ease, background .18s ease, border-color .18s ease;
      will-change:transform;
    }
    .btn:hover{transform:translateY(-2px);background:rgba(255,255,255,.09);border-color:rgba(255,255,255,.20)}
    .btn.primary{
      background:linear-gradient(135deg, rgba(0,179,255,.90), rgba(46,230,255,.45));
      border-color:rgba(46,230,255,.38);
    }
    .btn.primary:hover{transform:translateY(-2px) scale(1.01)}
    .btn .icon{
      width:24px;height:24px;border-radius:10px;
      background:rgba(255,255,255,.18);
      display:grid;place-items:center;
      border:1px solid rgba(255,255,255,.18);
    }

    section{padding: 26px 0}
    .sectionTitle{
      display:flex; align-items:flex-end; justify-content:space-between;
      gap:16px; margin:8px 0 14px;
    }
    .sectionTitle h2{margin:0;font-size:22px}
    .sectionTitle p{margin:0;color:var(--muted);max-width:60ch}

    .hr{
      height:1px;
      background:linear-gradient(90deg, transparent, rgba(255,255,255,.12), transparent);
      margin:18px 0;
    }

    /* ===== Tilt cards + glow ===== */
    .tiltStage{perspective: 1000px}
    .tilt{ transform-style:preserve-3d; will-change:transform; position:relative; }
    .glow{
      position:absolute; inset:-120px;
      background:radial-gradient(220px 180px at var(--mx,50%) var(--my,30%), rgba(46,230,255,.22), transparent 60%);
      opacity:0; transition:opacity .2s ease;
      pointer-events:none; mix-blend-mode:screen;
    }
    .tilt:hover .glow{opacity:.9}

    /* ===== 3D Carousel (Coverflow) ===== */
    .carouselWrap{
      border-radius: 26px;
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow);
      padding: 18px;
      overflow:hidden;
      position:relative;
    }
    .carouselHeader{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      margin-bottom: 10px;
    }
    .carouselHeader .hint{
      color:var(--muted);
      font-weight:700;
      font-size: 13px;
    }
    .carousel{
      position:relative;
      height: 360px;
      perspective: 1200px;
      user-select:none;
      touch-action: pan-y;
    }
    @media (max-width: 640px){
      .carousel{ height: 320px; }
    }

    .track{
      position:absolute; inset:0;
      transform-style: preserve-3d;
    }

    .slide{
      position:absolute;
      left:50%; top:50%;
      width: min(560px, 78vw);
      height: 300px;
      transform-style: preserve-3d;
      transform: translate(-50%, -50%);
      border-radius: 22px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      box-shadow: 0 22px 70px rgba(0,0,0,.55);
      cursor: grab;
    }
    .slide:active{ cursor: grabbing; }
    .slide::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,.0), rgba(0,0,0,.55));
      pointer-events:none;
    }

    .slideImg{
      position:absolute; inset:0;
      background-size: cover;
      background-position:center;
      transform: translateZ(-24px) scale(1.06);
      filter:saturate(1.05) contrast(1.03);
    }

    .slideCap{
      position:absolute; left:16px; right:16px; bottom:14px;
      transform: translateZ(30px);
      display:flex; align-items:flex-end; justify-content:space-between; gap:12px;
    }
    .slideCap strong{
      font-size: 16px;
      letter-spacing:.2px;
      text-shadow: 0 12px 38px rgba(0,0,0,.65);
    }
    .pill{
      padding:8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(5,9,20,.45);
      backdrop-filter: blur(10px);
      color: rgba(255,255,255,.85);
      font-weight:900;
      font-size: 12px;
      letter-spacing:.3px;
      white-space:nowrap;
    }

    .controls{
      display:flex; gap:10px; align-items:center; justify-content:flex-end;
      margin-top: 12px;
      flex-wrap:wrap;
    }
    .ctrlBtn{
      padding:10px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      color: var(--text);
      font-weight:900;
      cursor:pointer;
      transition: transform .16s ease, background .16s ease, border-color .16s ease;
    }
    .ctrlBtn:hover{ transform: translateY(-2px); background: rgba(255,255,255,.08); border-color: rgba(255,255,255,.20); }
    .toggle{
      display:flex; gap:8px; align-items:center;
      color:var(--muted); font-weight:800; font-size: 13px;
      padding:10px 12px; border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }
    .toggle input{ accent-color: var(--cyan); }

    /* ===== Reveal ===== */
    .reveal{opacity:0; transform: translateY(14px); transition: opacity .6s ease, transform .6s ease}
    .reveal.visible{opacity:1; transform: translateY(0)}

    footer{padding:30px 0 44px; color: rgba(255,255,255,.62); text-align:center}
  </style>
</head>
<body>
  <div class="lights"></div>

  <header>
    <div class="wrap nav">
      <a class="brand" href="#top">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <strong>OM ‚Äî Une Passion</strong>
          <small>Bleu & Blanc ‚Ä¢ Ferveur ‚Ä¢ Frissons</small>
        </div>
      </a>
      <nav class="links">
        <a href="#top">Accueil</a>
        <a href="#carrousel">Carrousel 3D</a>
        <a href="#chants">Texte</a>
      </nav>
    </div>
  </header>

  <main id="top" class="wrap">
    <section class="hero">
      <div class="reveal">
        <div class="kicker"><span class="dot"></span> Ici, l‚ÄôOM n‚Äôest pas un club : c‚Äôest une √©motion.</div>
        <h1>OM : une passion qui se vit, pas qui se raconte.</h1>
        <p class="lead">
          Le V√©lodrome, la ville, les chants‚Ä¶ et cette fiert√© bleu & blanc. Survole, clique, fais glisser :
          ce site bouge comme un soir de match.
        </p>
        <div class="ctaRow">
          <a class="btn primary" href="#carrousel"><span class="icon">üåÄ</span> Voir le carrousel 3D</a>
          <a class="btn" href="#chants"><span class="icon">üí¨</span> Lire le texte</a>
        </div>
        <div class="hr"></div>
        <p style="color:var(--muted);margin:0;font-weight:700">
          Astuce : sur PC, fais glisser le carrousel avec la souris. Sur mobile, swipe.
        </p>
      </div>

      <div class="tiltStage reveal" style="transition-delay:.12s">
        <div class="tilt carouselWrap" data-tilt>
          <div class="glow" aria-hidden="true"></div>
          <div class="carouselHeader">
            <div>
              <strong style="display:block;font-size:18px;letter-spacing:.2px">Carrousel 3D ‚ÄúCoverflow‚Äù</strong>
              <span class="hint">Autoplay + drag + profondeur</span>
            </div>
            <span class="pill">üíô‚ö™ OM</span>
          </div>

          <div id="carrousel" class="carousel">
            <div class="track" id="track"></div>
          </div>

          <div class="controls">
            <button class="ctrlBtn" id="prev">‚óÄ Pr√©c√©dent</button>
            <button class="ctrlBtn" id="next">Suivant ‚ñ∂</button>

            <label class="toggle" title="Active ou coupe le d√©filement automatique">
              <input type="checkbox" id="autoplay" checked />
              Autoplay
            </label>

            <button class="ctrlBtn" id="random">üé≤ Al√©atoire</button>
          </div>
        </div>
      </div>
    </section>

    <section id="chants" class="reveal">
      <div class="sectionTitle">
        <h2>Chants & promesse</h2>
        <p>Petit texte ‚Äútribune‚Äù (modifiable) pour ton site.</p>
      </div>

      <div class="carouselWrap">
        <strong style="display:block;font-size:18px">On est l√†.</strong>
        <p style="color:var(--muted);line-height:1.7;margin:10px 0 0">
          On est l√† quand √ßa gagne, on est l√† quand c‚Äôest dur. On est l√† parce qu‚Äôon aime.
          Parce que l‚ÄôOM, c‚Äôest une passion : une voix, un peuple, un battement.
          Et tant qu‚Äôil y aura le bleu et le blanc, il y aura la fiert√©.
        </p>
      </div>
    </section>

    <footer class="reveal">
      <div class="hr"></div>
      <p>Site fan non officiel ‚Ä¢ Fait avec üíô‚ö™ ‚Ä¢ Images : Unsplash</p>
    </footer>
  </main>

  <script>
    // ===== Reveal =====
    const reveals = document.querySelectorAll('.reveal');
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('visible'); });
    }, { threshold: 0.12 });
    reveals.forEach(el => io.observe(el));

    // ===== Tilt (cards/wrappers) + glow follow =====
    const tiltEls = document.querySelectorAll('[data-tilt]');
    tiltEls.forEach(el => {
      el.addEventListener('mousemove', (ev) => {
        const r = el.getBoundingClientRect();
        const x = ev.clientX - r.left;
        const y = ev.clientY - r.top;
        const px = x / r.width;
        const py = y / r.height;

        el.style.setProperty('--mx', (px * 100).toFixed(2) + '%');
        el.style.setProperty('--my', (py * 100).toFixed(2) + '%');

        const rotY = (px - 0.5) * 10;
        const rotX = (0.5 - py) * 8;
        el.style.transform = `translateY(-4px) rotateX(${rotX.toFixed(2)}deg) rotateY(${rotY.toFixed(2)}deg)`;
      });
      el.addEventListener('mouseleave', () => {
        el.style.transform = 'translateY(0) rotateX(0) rotateY(0)';
        el.style.setProperty('--mx', '50%');
        el.style.setProperty('--my', '30%');
      });
    });

    // ===== 3D Coverflow Carousel =====
    const slidesData = [
      {
        title: "Le V√©lodrome qui gronde",
        tag: "Ambiance",
        url: "https://images.unsplash.com/photo-1521412644187-c49fa049e84d?auto=format&fit=crop&w=1600&q=80"
      },
      {
        title: "La ville et la mer",
        tag: "Marseille",
        url: "https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=1600&q=80"
      },
      {
        title: "Les soirs de match",
        tag: "Frissons",
        url: "https://images.unsplash.com/photo-1517649763962-0c623066013b?auto=format&fit=crop&w=1600&q=80"
      },
      {
        title: "La ferveur en tribune",
        tag: "Chants",
        url: "https://images.unsplash.com/photo-1508098682722-e99c643e7f2b?auto=format&fit=crop&w=1600&q=80"
      },
      {
        title: "Bleu & blanc",
        tag: "Fiert√©",
        url: "https://images.unsplash.com/photo-1483729558449-99ef09a8c325?auto=format&fit=crop&w=1600&q=80"
      },
      {
        title: "Le collectif",
        tag: "√âquipe",
        url: "https://images.unsplash.com/photo-1552664730-d307ca884978?auto=format&fit=crop&w=1600&q=80"
      }
    ];

    const track = document.getElementById('track');
    let index = 0;
    let isDown = false;
    let startX = 0;
    let dragDX = 0;
    let autoplayTimer = null;

    // Build slides
    const slideEls = slidesData.map((s, i) => {
      const el = document.createElement('div');
      el.className = 'slide';
      el.setAttribute('role', 'group');
      el.setAttribute('aria-label', `${i+1} sur ${slidesData.length}`);

      el.innerHTML = `
        <div class="slideImg" style="background-image:url('${s.url}')"></div>
        <div class="glow" aria-hidden="true"></div>
        <div class="slideCap">
          <strong>${s.title}</strong>
          <span class="pill">${s.tag}</span>
        </div>
      `;
      // glow follow
      el.addEventListener('mousemove', (ev) => {
        const r = el.getBoundingClientRect();
        const x = ev.clientX - r.left;
        const y = ev.clientY - r.top;
        el.style.setProperty('--mx', (x / r.width * 100).toFixed(2) + '%');
        el.style.setProperty('--my', (y / r.height * 100).toFixed(2) + '%');
      });
      el.addEventListener('mouseleave', () => {
        el.style.setProperty('--mx', '50%');
        el.style.setProperty('--my', '30%');
      });

      track.appendChild(el);
      return el;
    });

    function wrap(n, len){
      // keep in [-inf, inf] but used for distance mapping
      return ((n % len) + len) % len;
    }

    function render(){
      const len = slideEls.length;

      slideEls.forEach((el, i) => {
        // distance from current index in circular space
        let d = i - index;
        // choose the shortest direction around the circle
        if (d >  len/2) d -= len;
        if (d < -len/2) d += len;

        // Add drag influence (smooth during drag)
        const dragInfluence = dragDX / 220; // tweak feel
        const dd = d - dragInfluence;

        const abs = Math.abs(dd);
        const isCenter = abs < 0.5;

        const rotateY = dd * -26;         // degrees
        const translateX = dd * 160;      // px
        const translateZ = 320 - abs * 180; // depth
        const scale = 1 - abs * 0.10;
        const opacity = 1 - abs * 0.18;

        el.style.opacity = Math.max(0.25, opacity).toFixed(2);
        el.style.transform = `
          translate(-50%, -50%)
          translateX(${translateX}px)
          translateZ(${translateZ}px)
          rotateY(${rotateY}deg)
          scale(${Math.max(0.76, scale).toFixed(3)})
        `;

        el.style.filter = `blur(${Math.min(2.2, abs*0.55).toFixed(2)}px)`;
        el.style.zIndex = String(1000 - Math.round(abs*10));

        // cursor and a subtle border emphasis on center slide
        el.style.borderColor = isCenter ? 'rgba(46,230,255,.35)' : 'rgba(255,255,255,.14)';
      });
    }

    function go(nextIndex){
      const len = slideEls.length;
      index = wrap(nextIndex, len);
      render();
    }

    function next(){ go(index + 1); }
    function prev(){ go(index - 1); }

    // Buttons
    document.getElementById('next').addEventListener('click', next);
    document.getElementById('prev').addEventListener('click', prev);
    document.getElementById('random').addEventListener('click', () => {
      const len = slideEls.length;
      let r = Math.floor(Math.random() * len);
      if (r === index) r = (r + 1) % len;
      go(r);
    });

    // Autoplay toggle
    const autoplay = document.getElementById('autoplay');
    function startAutoplay(){
      stopAutoplay();
      autoplayTimer = setInterval(() => {
        if (!isDown) next();
      }, 2600);
    }
    function stopAutoplay(){
      if (autoplayTimer) clearInterval(autoplayTimer);
      autoplayTimer = null;
    }
    autoplay.addEventListener('change', () => {
      autoplay.checked ? startAutoplay() : stopAutoplay();
    });

    // Drag / Swipe
    const carousel = document.querySelector('.carousel');

    function pointerDown(clientX){
      isDown = true;
      startX = clientX;
      dragDX = 0;
      stopAutoplay();
    }
    function pointerMove(clientX){
      if(!isDown) return;
      dragDX = clientX - startX;
      render();
    }
    function pointerUp(){
      if(!isDown) return;
      isDown = false;

      // snap to nearest
      const threshold = 60;
      if (dragDX > threshold) prev();
      else if (dragDX < -threshold) next();
      else render();

      dragDX = 0;

      if (autoplay.checked) startAutoplay();
    }

    // Mouse
    carousel.addEventListener('mousedown', (e) => pointerDown(e.clientX));
    window.addEventListener('mousemove', (e) => pointerMove(e.clientX));
    window.addEventListener('mouseup', pointerUp);

    // Touch
    carousel.addEventListener('touchstart', (e) => pointerDown(e.touches[0].clientX), {passive:true});
    carousel.addEventListener('touchmove', (e) => pointerMove(e.touches[0].clientX), {passive:true});
    carousel.addEventListener('touchend', pointerUp);

    // Keyboard
    window.addEventListener('keydown', (e)=>{
      if(e.key === 'ArrowRight') next();
      if(e.key === 'ArrowLeft') prev();
    });

    // Initial
    render();
    startAutoplay();

    // Pause autoplay when tab not visible (clean)
    document.addEventListener('visibilitychange', ()=>{
      if(document.hidden) stopAutoplay();
      else if(autoplay.checked) startAutoplay();
    });
  </script>
</body>
</html>
